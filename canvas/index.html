<!doctype html>
<html>
	<head>
		<title>canvasExample</title>
        <meta charset='utf-8' />
		</head>
		<body>

		<!-- <canvas height='480' width='320' id='example' style='margin-left:450px'>Обновите браузер</canvas> -->
		<script type="text/javascript">


			var canvas = document.createElement('canvas');
			document.body.appendChild(canvas);

			var ctx = canvas.getContext('2d')




			// var example = document.getElementById("example"),
			//     ctx     = example.getContext('2d');
			ctx.fillStyle = 'green';
			ctx.fillRect(10, 10, 320, 480);
			var img = new Image();
			//var img = document.getElementById("ball");
			img.src="ball.png";
			img.onload = function() {    
        		ctx.drawImage(img, 150, 50, 20, 20);  
     		 }
      		img.id="ball";
      		console.log(img.id);

      		var ball = document.getElementById('ball');
				ball.onmousedown = function(e) { // 1. отследить нажатие
 				 ball.style.position = 'absolute';
 				 moveAt(e);

  			document.body.appendChild(ball);
  			ball.style.zIndex = 1000; 

  			function moveAt(e) {
    			ball.style.left = e.pageX - ball.offsetWidth / 2 + 'px';
    			ball.style.top = e.pageY - ball.offsetHeight / 2 + 'px';
  			}

  
  			document.onmousemove = function(e) {
    			moveAt(e);
    			document.ball.posx.value = e.pageX;
    			document.ball.posy.value = e.pageY;
  			}

  			ball.onmouseup = function() {
    			document.onmousemove = null;
    			ball.onmouseup = null;
  			}
  			ball.ondragstart = function() {
  				return false;
			};
			}

			</script>
	</body>
</html>